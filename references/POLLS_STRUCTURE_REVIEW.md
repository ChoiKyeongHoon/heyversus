# Polls 페이지 구조 메모 (임시 메모)

## 현재 구조 평가

- **장점**: 서버 컴포넌트에서 쿼리 파라미터 해석+prefetch로 초기 로드 최적화가 깔끔하며(`src/app/polls/page.tsx`), 카테고리/정렬/필터 preset과 URL 동기화가 한 곳에 모여 있어 공유 가능한 목록 뷰 구성이 쉽다(`src/app/polls/PollsClientInfinite.tsx`).
- **아쉬움**: `PollsClientInfinite`가 데이터 패칭, URL 상태, 투표/즐겨찾기 변이, 카드 렌더까지 모두 맡는 300+ 라인 “올인원”이라 가독성과 테스트성이 떨어진다. 책임(1) URL/카테고리 상태 관리, (2) 투표/즐겨찾기 변이+캐시 패치, (3) 렌더/UI 레이아웃을 분리하면 유지보수가 쉬워질 것.
- **상태 중복**: 남은 시간 계산 util이 여기서도 별도 정의(`getTimeRemaining`)되어 있고 상세 페이지 등과 중복 가능성이 높음 → 공용 util로 통합 필요.
- **확장 여지**: 현재 구조는 “카드에서 즉시 투표” 플로우에 최적화돼 모달형 인터랙션(랜덤 돌림판 등)을 붙이려면 상위 컴포넌트에 추가 상태/오버레이를 넣어야 함. 카드를 “요약/CTA 컨테이너”, 상위에서 “모달/확장 인터랙션” 관리로 층을 나누면 실험 추가가 쉬워짐.

## 제안 리팩터 방향 (후순위)

1) `usePollsQueryState`(URL 파라미터 관리) + `usePollsInteractions`(투표/즐겨찾기 변이+캐시 패치) 훅으로 로직 분리.
2) `PollsClientInfinite`는 훅 결과를 받아 레이아웃/뷰만 담당하도록 단순화.
3) 남은 시간 계산 등 공용 util을 `lib/utils`로 이관해 통일.
